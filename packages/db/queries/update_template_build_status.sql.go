// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: update_template_build_status.sql

package queries

import (
	"context"
	"time"

	"github.com/e2b-dev/infra/packages/db/types"
	"github.com/google/uuid"
)

const updateEnvBuildStatus = `-- name: UpdateEnvBuildStatus :exec
UPDATE "public"."env_builds"
SET status = $1,
    finished_at = $2,
    reason = $3
WHERE id = $4 AND env_id = $5
`

type UpdateEnvBuildStatusParams struct {
	Status     string
	FinishedAt *time.Time
	Reason     types.BuildReason
	BuildID    uuid.UUID
	TemplateID string
}

func (q *Queries) UpdateEnvBuildStatus(ctx context.Context, arg UpdateEnvBuildStatusParams) error {
	_, err := q.db.Exec(ctx, updateEnvBuildStatus,
		arg.Status,
		arg.FinishedAt,
		arg.Reason,
		arg.BuildID,
		arg.TemplateID,
	)
	return err
}
