// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: get_template.sql

package queries

import (
	"context"

	"github.com/google/uuid"
)

const getTemplateByIdOrAlias = `-- name: GetTemplateByIdOrAlias :one
SELECT e.id, e.created_at, e.updated_at, e.public, e.build_count, e.spawn_count, e.last_spawned_at, e.team_id, e.created_by, e.cluster_id FROM "public"."envs" e
LEFT JOIN "public"."env_aliases" ea ON ea.env_id = e.id
WHERE e.team_id = $1 AND (
e.id = $2 OR
ea.alias = $2
)
`

type GetTemplateByIdOrAliasParams struct {
	TeamID            uuid.UUID
	TemplateIDOrAlias string
}

func (q *Queries) GetTemplateByIdOrAlias(ctx context.Context, arg GetTemplateByIdOrAliasParams) (Env, error) {
	row := q.db.QueryRow(ctx, getTemplateByIdOrAlias, arg.TeamID, arg.TemplateIDOrAlias)
	var i Env
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Public,
		&i.BuildCount,
		&i.SpawnCount,
		&i.LastSpawnedAt,
		&i.TeamID,
		&i.CreatedBy,
		&i.ClusterID,
	)
	return i, err
}
