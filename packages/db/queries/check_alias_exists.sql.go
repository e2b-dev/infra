// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: check_alias_exists.sql

package queries

import (
	"context"
)

const checkAliasConflictsWithTemplateID = `-- name: CheckAliasConflictsWithTemplateID :one
SELECT EXISTS(
    SELECT 1
    FROM "public"."envs"
    WHERE id = $1
)
`

func (q *Queries) CheckAliasConflictsWithTemplateID(ctx context.Context, alias string) (bool, error) {
	row := q.db.QueryRow(ctx, checkAliasConflictsWithTemplateID, alias)
	var exists bool
	err := row.Scan(&exists)
	return exists, err
}

const checkAliasExistsInNamespace = `-- name: CheckAliasExistsInNamespace :one
SELECT alias, is_renamable, env_id, namespace, id
FROM "public"."env_aliases"
WHERE alias = $1
  AND namespace IS NOT DISTINCT FROM $2::text
`

type CheckAliasExistsInNamespaceParams struct {
	Alias     string
	Namespace *string
}

// Check if alias exists within a specific namespace.
// Used for namespace-aware lookups. Returns the alias if found.
func (q *Queries) CheckAliasExistsInNamespace(ctx context.Context, arg CheckAliasExistsInNamespaceParams) (EnvAlias, error) {
	row := q.db.QueryRow(ctx, checkAliasExistsInNamespace, arg.Alias, arg.Namespace)
	var i EnvAlias
	err := row.Scan(
		&i.Alias,
		&i.IsRenamable,
		&i.EnvID,
		&i.Namespace,
		&i.ID,
	)
	return i, err
}
