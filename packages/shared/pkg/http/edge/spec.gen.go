// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
